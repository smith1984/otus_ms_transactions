# otus_ms_transactions (Распределенные транзакции)

## Зависимости

Для выполнения задания использовались следующие зависимости:

- [Minikube 1.29.0](https://github.com/kubernetes/minikube/releases/tag/v1.29.0)
- [Kubectl 0.26.1](https://github.com/kubernetes/kubectl/releases/tag/v0.26.1)
- [Istioctl 1.17.0](https://github.com/istio/istio/releases/tag/1.17.0)
- [Heml 3.3.4](https://github.com/helm/helm/releases/tag/v3.3.4)


## Описание
Реализация распределённых транзакции с использованием паттерна Сага с оркестратором

Реализованы следующие сервисы "Заказ", "Платеж", "Склад", "Доставка"
Для сервиса "Заказ", в рамках метода "создание заказа" происходит вызов оркестратора, которые запускает запросы к связанным сервисам
1. Сервис "Платеж" выполняет оплату товара 
2. Сервис "Склад" резервирует товар 
3. Сервис "Доставка" резервирует доставку на определённое время
    
Если хотя бы от одного из сервисов приходит не успешный результат, то происходит откат всех успешных событий и заказ переходит в статус отменён.

## Разворачивание инфраструктуры и сервисов
Выполнить
> sh ./install.sh

## Тестирование
> newman run ./hw_transactions_postman_collection.json

## Удаление инфраструктуры и сервисов
> sh ./delete.sh